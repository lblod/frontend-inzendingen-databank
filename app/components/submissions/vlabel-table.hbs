<div class="u-border--fat--bottom u-hide-on-print">
  <div class="u-padding--round--small">

    <div class="grid">
      <div class="col--4-12 col--1-1--s">
        <h1 class="h2 u-spacer--right--small u-display-inline-block">Toezicht ABB</h1>
      </div>
      <div class="col--8-12 col--1-1--s u-align-right--tablet-portrait-up">
        <WuButtonGroup>
          <WuButton @onClick={{this.resetFilters}} @size="small" @isDark={{true}} @isLink={{true}} @isNarrow={{true}}
                    @class="u-spacer--bottom--none">
            <i class="vi vi-cross vi-u-link button__icon" aria-hidden="true"></i> Herstel alle filters
          </WuButton>
        </WuButtonGroup>
      </div>
    </div>

    <!-- FILTERS -->
    <div class="grid">
      <div class="col--4-12 col--6-12--m col--6-12--s">
        <label class="label--subtle form__label">Bestuurseenheid</label>
        <Filter::AdministrativeUnitSelect @value={{@filter.bestuurseenheidIds}} @onSelectionChange={{fn this.setFilter
                                                                                                        'bestuurseenheidIds'}} />
        <label class="label--subtle form__label">MAR-code</label>
        <Filter::ChartOfAccountSelect @value={{@filter.marCodeIds}} @onSelectionChange={{fn this.setFilter 'marCodeIds'}} />
      </div>
      <div class="col--4-12 col--1-1--m col--1-1--s">
        <div class="grid">
          <div class="col--1-1 col--6-12--m">
            <Filter::DateRange @label="Periode verstuurd" @fromValue={{@filter.sentDateFrom}} @toValue={{@filter.sentDateTo}} @onChangeFromValue={{fn this.setFilter 'sentDateFrom'}} @onChangeToValue={{fn this.setFilter 'sentDateTo'}} />
          </div>
          <div class="col--1-1 col--6-12--m">
            <Filter::DateRange @label="Periode zitting / besluit" @defaultFromDate={{this.lastMonth}} @fromValue={{@filter.sessionDateFrom}} @toValue={{@filter.sessionDateTo}} @onChangeFromValue={{fn this.setFilter 'sessionDateFrom'}} @onChangeToValue={{fn this.setFilter 'sessionDateTo'}} />
          </div>
        </div>
      </div>
      <div class="col--4-12 col--1-1--m col--1-1--s">
        <div class="grid">
          <div class="col--1-1 col--6-12--m">
            <Filter::DateRange @label="Geldt vanaf" @defaultToDate={{this.nextYear}} @fromValue={{@filter.dateOfEntryIntoForceFrom}} @toValue={{@filter.dateOfEntryIntoForceTo}} @onChangeFromValue={{fn this.setFilter 'dateOfEntryIntoForceFrom'}} @onChangeToValue={{fn this.setFilter 'dateOfEntryIntoForceTo'}} />
          </div>
          <div class="col--1-1 col--6-12--m">
            <Filter::DateRange @label="Geldt tot" @defaultToDate={{this.nextYear}} @fromValue={{@filter.endDateFrom}} @toValue={{@filter.endDateTo}} @onChangeFromValue={{fn this.setFilter 'endDateFrom'}} @onChangeToValue={{fn this.setFilter 'endDateTo'}} />
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TABLE -->
<DataTable @content={{@model}} @isLoading={{@isLoading}} @noDataMessage="Geen inzendingen gevonden" @sort={{@sort}} @page={{@page}} @size={{@size}} @class="container-flex--contain data-table" as |t|>
  <t.content as |c|>
    <c.header>
      <ThSortable @label="Bestuurseenheid" @field="organization" @currentSorting={{@sort}} @class="u-visible--tablet-landscape-up" />
      <!-- TODO find out what field this is -->
      <ThSortable @label="MAR-code" @field="formData.chartOfAccount" @currentSorting={{@sort}} @class="u-visible--tablet-portrait-up" />
      {{#unless @displaySubset}}
        <ThSortable @label="Zitting / besluit" @field="formData.sessionStartedAtTime" @currentSorting={{@sort}} @class="u-visible--tablet-landscape-up" />
        <ThSortable @label="Verstuurd" @field="sentDate" @currentSorting={{@sort}} @class="u-visible--tablet-landscape-up" />
      {{/unless}}
      <!-- TODO find equivalent -->
      <ThSortable @label="Geldt vanaf" @field="formData.firstDateInForce" @currentSorting={{@sort}} @class="u-visible--tablet-landscape-up" />
      <ThSortable @label="Geldt tot" @field="formData.dateNoLongerInForce" @currentSorting={{@sort}} @class="u-visible--tablet-landscape-up" />
      <th class="u-hide-on-print"><!-- Actions --></th>
    </c.header>
    <c.body as |row|>
      <td class="u-visible--tablet-portrait-up" style="max-width: 250px;">{{row.organization.naam}} <span class="u-hidden--tablet-landscape-up text-fade"><br>{{row.organization.classificatie.label}}</span></td>
      <td class="u-visible--tablet-landscape-up">{{row.formData.chartOfAccount.notation}} - {{row.formData.chartOfAccount.label}}</td>
      {{#unless @displaySubset}}
        <td class="u-visible--tablet-landscape-up">{{moment-format row.formData.sessionStartedAtTime 'DD-MM-YYYY'}}</td>
        <td class="u-visible--tablet-landscape-up">{{moment-format row.sentDate 'DD-MM-YYYY'}}</td>
      {{/unless}}
      <td class="u-visible--tablet-landscape-up">{{moment-format row.formData.firstDateInForce 'DD-MM-YYYY'}}</td>
      <td class="u-visible--tablet-landscape-up">{{moment-format row.formData.dateNoLongerInForce 'DD-MM-YYYY'}}</td>
      <td class="u-hide-on-print"><LinkTo @route="supervision.submissions.show" @model={{row.id}}>Bekijk</LinkTo></td>
    </c.body>
  </t.content>
</DataTable>
